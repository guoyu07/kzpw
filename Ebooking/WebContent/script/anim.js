/*from tccdn minify at 2013-12-24 6:01:37,fileï¼š/cn/public/module/anim/0.3/anim.js?v=13121201*/
(function(a){function d(e,f,g){return(e+(f-e)*g).toFixed(3)}function i(e){var f=e.match(/[\-\d\.]+/g),f=f&&f[0];e=e.split(f);f=parseFloat(f);return{v:f?f:0,f:d,u:e}}function j(e){for(var f=e.length,g=[];f--;){g[g[f]=e[f]]=i(e[g[f]])}return g}function h(){for(var e=this.elem.length;e--;){cancelAnimationFrame(this.elem[e].timer())}}function l(e){e&&(this.animHandler=e);return this.animHandler}function o(k,n,s,u){k.timer=l;n=fish.css.normalize(n);var x=j(n);n=document.defaultView&&document.defaultView.getComputedStyle;n=k.currentStyle?k.currentStyle:n(k,null);for(var t,y={},w,v,A=s.time||200,z=s.easing||function(e){return Math.sqrt(1-Math.pow(e-1,2))},B=k.timer(),C=x.length;C--;){if(t=x[C],s=k.style[t]||n[t]){"opacity"===t&&!p?(s=k.style.filter||n.filter,s=s.match(/opacity\s*=\s*([^)]*)/),y[t]={v:s?s[0]:100,f:d,u:["alpha(opacity=",")"]}):y[t]=i(s)}}null!=B&&cancelAnimationFrame(B);requestAnimationFrame(function(e){w=e;v=e+A});k.timer(requestAnimationFrame(function(e){for(var f=e>=v?1:(e-w)/A,g=x.length;g--;){t=x[g],y[t]&&(k.style[t]=x[t].u[0]+x[t].f(y[t].v,x[t].v,z(f))+x[t].u[1])}e>=v?(cancelAnimationFrame(k.timer()),u&&u(k)):k.timer(requestAnimationFrame(arguments.callee))}));return k}for(var b=["ms","moz","webkit","o"],c=0;c<b.length&&!a.requestAnimationFrame;++c){a.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[b[c]+"CancelAnimationFrame"]||a[b[c]+"CancelRequestAnimationFrame"]}if(!a.requestAnimationFrame||!a.cancelAnimationFrame){a.requestAnimationFrame=function(e){return setTimeout(function(){e(+new Date)},1)},a.cancelAnimationFrame=function(e){clearTimeout(e)}}var p=void 0!==document.createElement("div").style;fish.extend({anim:function(k,m,n){var r=this.length,u=this.length,q=0,s={elem:[],stop:h},t=n&&n.fn||n||null;n=n||{};for(n.time=m;r--;){s.elem.push(o(this[r],k,n,function(e){q++;q>=u&&"function"===typeof t&&t()}))}return s}})})(window);